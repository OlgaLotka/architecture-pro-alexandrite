### <a name="_b7urdng99y53"></a>**Название задачи:**  «Выбор и настройка мониторинга в системе»
### <a name="_hjk0fkfyohdk"></a>**Автор:** Лотка О.А.
### <a name="_uanumrh8zrui"></a>**Дата:** 19.08.2025

### <a name="_u8xz25hbrgql"></a>** Мотивация **
Мониторинг позволит сделать систему более стабильной, повысит лояльность клиентов, поможет избежать простоев в производстве, потерь от судебных исков и услуг юристов, повысит рейтинг компании в Яндексе, поможет оценить как часто пользователи использут то или иное апи и приоретизировать какие части нужно доработать/выпились/изменить в первую очередь

### <a name="_u8xz25hbrgql"></a>** Выбор подхода к мониторингу **
Предлагаю подход Четыре золотых сигнала от Google и RED

| **№** | **Метрика**                                                     | **Ярлык**                                           | **Необходимость**                                                                                                    |
|:-----:|:----------------------------------------------------------------|:----------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------|
|   1   | Number of HTTP 500 for CRM API                                  |                                                     | чтобы знать сколько непридвиденных ситуаций произошло и динамике смотреть как фиксы дефектов будут снижать эту цифру |
|   2   | Number of HTTP 500 for MES API                                  |                                                     | чтобы знать сколько непридвиденных ситуаций произошло и динамике смотреть как фиксы дефектов будут снижать эту цифру |
|   3   | Number of requests (RPS) per user for internet shop API         | Статус заказа, номер заказа , ид пользователя       | чтобы понять сколько запросов прилетает с какого апи                                                                 |
|   4   | Number of requests (RPS) per user for CRM API                   | Статус заказа, номер заказа, ид пользователя        | чтобы понять сколько запросов прилетает с какого апи                                                                 |
|   5   | Number of requests (RPS) per user for MES API                   | Статус заказа, номер заказа , ид пользователя       | чтобы понять сколько запросов прилетает с какого апи                                                                 |
|   6   | Response time (latency) for CRM API                             |                                                     | чтобы понять нужно ли нам масштабировать этот сервис                                                                 |
|   7   | Частота запросов на создание заказа                             | Статус заказа, номер заказа , ид пользователя       | можно будет понять сколько заказов потерялось сравнив с количеством успешно созданных                                |
|   8   | Частота запросов на просмотр страницы с заказами                | ид пользователя                                     | для понимания пользовательского опыта, сколько человек раз клинкул дожидаясь нужного статуса                         |
|   9   | Количество ошибок при создании заказа                           | Статус заказа, номер заказа , ид пользователя       | чтобы в дим амике смотреть как внедрение трассировки и фиксы снижают эту метрику                                      |
|  10   | Среднее время запроса (latency) на создание                     |                                                     | чтобы можно было сделать вывод о пользоветельскои опыте                                                              |
|  11   | Среднее время запроса (latency) на просмотр заказов             |                                                     | чтобы в димамике смотеть какие результаты приносит кеширование                                                       |


### <a name="_u8xz25hbrgql"></a>** План действий ** 
 * Реализовать сбор метрик, включая добавляет лейблов метрик в коде
 * Поднять Grafana
 * Создать дашборду для сопровождения
 * Создавать отчет о работе сервисов


### <a name="_u8xz25hbrgql"></a>** Привышение порога насыщености ** 
Пороговым значением является 80%

Если произошло превышение порогового значения для сервиса расчета добавляем поду сервиса
создать оповещение на почту дежурному специалисту сопровождения