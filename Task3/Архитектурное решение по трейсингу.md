### <a name="_b7urdng99y53"></a>**Название задачи:**  «Архитектурное решение по трейсингу»
### <a name="_hjk0fkfyohdk"></a>**Автор:** Лотка О.А.
### <a name="_uanumrh8zrui"></a>**Дата:** 22.08.2025

### <a name="_u8xz25hbrgql"></a>**  Мотивация **

Добавление трейсинга упростит работу сопровождения, сократит количество простоев из-за частых хотфиксов (так как проблемное место будет точно определено)
* Стоимость исправление дефекта
* Сокращение количества потерянных заказов
* Определение в каком из сервисов "завис" запрос надолго

### <a name="_u8xz25hbrgql"></a>**  Предлагаемое решение ** 

В первую очередь надо добавить трейсинг для запросов связанных с заказами. Это сервисы ShopAPI, CRM Api и MES API 
Также предлагаю добавить очередь для запросов на обсчет 3 моделей так как время обработки не константно и возрастает нелинейно

Стек Jaeger

### <a name="_u8xz25hbrgql"></a>**  Обеспечение безопасности **
Для обеспечения безопасности необходимо предусмотреть vpn для доступа к сети компании.
Добавить роль Сопровождение, с доступом системе трейсинга, так же для заведения инцидентов в внутренней сети компании поднять жиру и все проблемы решать в ней.


[Диаграмма контейнеров](jewerly_c4_model.drawio)


### <a name="_u8xz25hbrgql"></a>**  Компромиссы ** 

Библиотеки трейсинга работают корректно не со всеми версиями очередей. Возможно придется дорабатывать принудительное добавление в заголовки сообщений spanId и traceId
Это может быть доработкой довольно объемной